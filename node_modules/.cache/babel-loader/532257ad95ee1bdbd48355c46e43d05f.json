{"ast":null,"code":"import _classCallCheck from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/lala/spalifeandstory/src/components/FileController/FileController.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport FileUploadContext from \"./FileUploadContext\";\n\nvar FileController =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FileController, _Component);\n\n  function FileController(props) {\n    var _this;\n\n    _classCallCheck(this, FileController);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FileController).call(this, props));\n    _this.noOfFilesDownloading = 0;\n    _this.getFileToSend = _this.getFileToSend.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getSignedUrl = _this.getSignedUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(FileController, [{\n    key: \"getSignedUrl\",\n    value: function getSignedUrl(fileName, file) {\n      var _this2 = this;\n\n      axios({\n        method: \"get\",\n        url: \"/api/v1/aws_direct_link?filename=\".concat(fileName)\n      }).then(function (response) {\n        console.log(response);\n        var url = response.data.data.url;\n\n        _this2.sendFileToAws(url, file);\n      });\n    }\n  }, {\n    key: \"sendFileToAws\",\n    value: function sendFileToAws(url, file) {\n      console.log(url);\n      console.log(file);\n      axios({\n        method: \"put\",\n        url: url,\n        data: file,\n        headers: {\n          \"Content-Type\": file.type,\n          \"Access-Control-Allow-Origin\": \"*\"\n        },\n        responseType: \"json\",\n        onUploadProgress: function onUploadProgress(progressEvent) {\n          console.log(progressEvent);\n        }\n      }).then(function (resp) {\n        console.log(resp);\n      }).catch(function (error) {\n        console.log(\"aaaaa\");\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"getFileToSend\",\n    value: function getFileToSend(file) {\n      console.log(file);\n      this.getSignedUrl(file.name, file);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var Home = this.props.Home;\n      return React.createElement(FileUploadContext.Provider, {\n        value: {\n          fileController: {\n            getFileToSend: this.getFileToSend\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Home, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return FileController;\n}(Component);\n\nexport { FileController as default };","map":{"version":3,"sources":["/home/lala/spalifeandstory/src/components/FileController/FileController.js"],"names":["React","Component","axios","FileUploadContext","FileController","props","noOfFilesDownloading","getFileToSend","bind","getSignedUrl","fileName","file","method","url","then","response","console","log","data","sendFileToAws","headers","type","responseType","onUploadProgress","progressEvent","resp","catch","error","name","Home","fileController"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,iBAAP,MAA8B,qBAA9B;;IACqBC,c;;;;;AACnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wFAAMA,KAAN;AACA,UAAKC,oBAAL,GAA4B,CAA5B;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,uDAArB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AAJiB;AAKlB;;;;iCAEYE,Q,EAAUC,I,EAAM;AAAA;;AAC3BT,MAAAA,KAAK,CAAC;AACJU,QAAAA,MAAM,EAAE,KADJ;AAEJC,QAAAA,GAAG,6CAAsCH,QAAtC;AAFC,OAAD,CAAL,CAGGI,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,YAAIF,GAAG,GAAGE,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBL,GAA7B;;AACA,QAAA,MAAI,CAACM,aAAL,CAAmBN,GAAnB,EAAwBF,IAAxB;AACD,OAPD;AAQD;;;kCAEaE,G,EAAKF,I,EAAM;AACvBK,MAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACAT,MAAAA,KAAK,CAAC;AACJU,QAAAA,MAAM,EAAE,KADJ;AAEJC,QAAAA,GAAG,EAAEA,GAFD;AAGJK,QAAAA,IAAI,EAAEP,IAHF;AAIJS,QAAAA,OAAO,EAAE;AACP,0BAAgBT,IAAI,CAACU,IADd;AAEP,yCAA+B;AAFxB,SAJL;AAQJC,QAAAA,YAAY,EAAE,MARV;AASJC,QAAAA,gBAAgB,EAAE,0BAAAC,aAAa,EAAI;AACjCR,UAAAA,OAAO,CAACC,GAAR,CAAYO,aAAZ;AACD;AAXG,OAAD,CAAL,CAaGV,IAbH,CAaQ,UAAAW,IAAI,EAAI;AACZT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAZ;AACD,OAfH,EAgBGC,KAhBH,CAgBS,UAAAC,KAAK,EAAI;AACdX,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,KAAZ;AACD,OAnBH;AAoBD;;;kCAEahB,I,EAAM;AAClBK,MAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACA,WAAKF,YAAL,CAAkBE,IAAI,CAACiB,IAAvB,EAA6BjB,IAA7B;AACD;;;6BAEQ;AAAA,UACCkB,IADD,GACU,KAAKxB,KADf,CACCwB,IADD;AAEP,aACE,oBAAC,iBAAD,CAAmB,QAAnB;AACE,QAAA,KAAK,EAAE;AAAEC,UAAAA,cAAc,EAAE;AAAEvB,YAAAA,aAAa,EAAE,KAAKA;AAAtB;AAAlB,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGE,oBAAC,IAAD,oBAAU,KAAKF,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAHF,CADF;AAOD;;;;EA1DyCJ,S;;SAAvBG,c","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nimport FileUploadContext from \"./FileUploadContext\";\nexport default class FileController extends Component {\n  constructor(props) {\n    super(props);\n    this.noOfFilesDownloading = 0;\n    this.getFileToSend = this.getFileToSend.bind(this);\n    this.getSignedUrl = this.getSignedUrl.bind(this);\n  }\n\n  getSignedUrl(fileName, file) {\n    axios({\n      method: \"get\",\n      url: `/api/v1/aws_direct_link?filename=${fileName}`\n    }).then(response => {\n      console.log(response);\n      let url = response.data.data.url;\n      this.sendFileToAws(url, file);\n    });\n  }\n\n  sendFileToAws(url, file) {\n    console.log(url);\n    console.log(file);\n    axios({\n      method: \"put\",\n      url: url,\n      data: file,\n      headers: {\n        \"Content-Type\": file.type,\n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      responseType: \"json\",\n      onUploadProgress: progressEvent => {\n        console.log(progressEvent);\n      }\n    })\n      .then(resp => {\n        console.log(resp);\n      })\n      .catch(error => {\n        console.log(\"aaaaa\");\n        console.log(error);\n      });\n  }\n\n  getFileToSend(file) {\n    console.log(file);\n    this.getSignedUrl(file.name, file);\n  }\n\n  render() {\n    const { Home } = this.props;\n    return (\n      <FileUploadContext.Provider\n        value={{ fileController: { getFileToSend: this.getFileToSend } }}\n      >\n        <Home {...this.props} />\n      </FileUploadContext.Provider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}