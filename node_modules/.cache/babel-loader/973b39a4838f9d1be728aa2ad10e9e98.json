{"ast":null,"code":"import _regeneratorRuntime from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/lala/spalifeandstory/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/lala/spalifeandstory/src/components/Project/Memory/Memory.js\";\nimport React, { Component } from \"react\";\nimport HocForm from \"../../Shared/HocForm\";\nimport AddMemoryForm from \"./AddMemoryForm\";\nimport { MemoryAddFields } from \"../../../Utilities/FormsModel\";\nimport MakeContextConsumer from \"../../Auth/MakeContextConsumer\";\nimport MemoryListing from \"./MemoryListing\";\nimport MemoryTimeline from \"./MemoryTimeline\";\n\nvar Memory =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Memory, _Component);\n\n  function Memory(props) {\n    var _this;\n\n    _classCallCheck(this, Memory);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Memory).call(this, props));\n    _this.state = {\n      modal: false,\n      memoryList: [],\n      memoryTimeline: [],\n      activeYear: \"\"\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addMemoryCall = _this.addMemoryCall.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchMemory = _this.fetchMemory.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onProductClick = _this.onProductClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Memory, [{\n    key: \"onProductClick\",\n    value: function onProductClick(year) {\n      this.fetchMemory(year);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var memoryTimeline, memoryList;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.props.authAxios({\n                  method: \"get\",\n                  url: \"/api/v1/projects/\".concat(this.props.projectId, \"/timeline\")\n                }).then(function (response) {\n                  return response.data.data;\n                });\n\n              case 2:\n                memoryTimeline = _context.sent;\n                _context.next = 5;\n                return this.props.authAxios({\n                  method: \"get\",\n                  url: \"/api/v1/projects/\".concat(this.props.projectId, \"/memories?\").concat(memoryTimeline[0])\n                }).then(function (response) {\n                  return response.data.data;\n                });\n\n              case 5:\n                memoryList = _context.sent;\n                this.setState(function (prev) {\n                  return {\n                    memoryList: memoryList,\n                    memoryTimeline: memoryTimeline\n                  };\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        modal: !this.state.modal\n      });\n    }\n  }, {\n    key: \"addMemoryCall\",\n    value: function addMemoryCall(memory) {\n      var $this = this;\n      console.log(memory);\n      memory[\"project_id\"] = this.props.projectId;\n      this.props.authAxios({\n        method: \"post\",\n        data: {\n          memory: memory\n        },\n        url: \"/api/v1/memories\"\n      }).then(function (response) {\n        $this.setState({\n          leads: response.data.data\n        });\n      });\n    }\n  }, {\n    key: \"fetchMemory\",\n    value: function fetchMemory(year) {\n      var $this = this;\n      this.props.authAxios({\n        method: \"get\",\n        url: \"/api/v1/projects/\".concat(this.props.projectId, \"/memories\"),\n        data: {\n          year: year\n        }\n      }).then(function (response) {\n        console.log(response);\n        $this.setState({\n          memoryList: response.data.data,\n          activeYear: year\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"overview-wrap wrapper-title position-relative\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Timeline\")), React.createElement(\"div\", {\n        className: \"default-tab\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.state.memoryTimeline[0] ? React.createElement(MemoryTimeline, {\n        memoryTimeline: this.state.memoryTimeline,\n        fetchMemory: this.fetchMemory,\n        onProductClick: this.onProductClick,\n        activeYear: this.state.activeYear,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }) : null, React.createElement(\"h3\", {\n        className: \"heading-with-wrapper heading-button border-heading-bottom bar-with-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), \"Memories\", React.createElement(\"button\", {\n        id: \"add-new-memory\",\n        className: \"au-btn au-btn-icon au-btn--pink btn-lg\",\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-rotate-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), \"Add Memory\")), React.createElement(MemoryListing, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(HocForm, {\n        toggle: this.toggle,\n        modal: this.state.modal,\n        formFields: MemoryAddFields,\n        FormView: AddMemoryForm,\n        submitCall: this.addMemoryCall,\n        isChannel: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Memory;\n}(Component);\n\nexport default MakeContextConsumer(Memory);","map":{"version":3,"sources":["/home/lala/spalifeandstory/src/components/Project/Memory/Memory.js"],"names":["React","Component","HocForm","AddMemoryForm","MemoryAddFields","MakeContextConsumer","MemoryListing","MemoryTimeline","Memory","props","state","modal","memoryList","memoryTimeline","activeYear","toggle","bind","addMemoryCall","fetchMemory","onProductClick","year","authAxios","method","url","projectId","then","response","data","setState","prev","memory","$this","console","log","leads"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport HocForm from \"../../Shared/HocForm\";\nimport AddMemoryForm from \"./AddMemoryForm\";\nimport { MemoryAddFields } from \"../../../Utilities/FormsModel\";\nimport MakeContextConsumer from \"../../Auth/MakeContextConsumer\";\nimport MemoryListing from \"./MemoryListing\";\nimport MemoryTimeline from \"./MemoryTimeline\";\n\nclass Memory extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false,\n      memoryList: [],\n      memoryTimeline: [],\n      activeYear: \"\"\n    };\n    this.toggle = this.toggle.bind(this);\n    this.addMemoryCall = this.addMemoryCall.bind(this);\n    this.fetchMemory = this.fetchMemory.bind(this);\n    this.onProductClick = this.onProductClick.bind(this);\n  }\n\n  onProductClick(year) {\n    this.fetchMemory(year);\n  }\n\n  async componentDidMount() {\n    let memoryTimeline = await this.props\n      .authAxios({\n        method: \"get\",\n        url: `/api/v1/projects/${this.props.projectId}/timeline`\n      })\n      .then(response => {\n        return response.data.data;\n      });\n\n    let memoryList = await this.props\n      .authAxios({\n        method: \"get\",\n        url: `/api/v1/projects/${this.props.projectId}/memories?${\n          memoryTimeline[0]\n        }`\n      })\n      .then(response => {\n        return response.data.data;\n      });\n\n    this.setState(prev => {\n      return { memoryList: memoryList, memoryTimeline: memoryTimeline };\n    });\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n  addMemoryCall(memory) {\n    let $this = this;\n    console.log(memory);\n    memory[\"project_id\"] = this.props.projectId;\n    this.props\n      .authAxios({\n        method: \"post\",\n        data: {\n          memory: memory\n        },\n        url: \"/api/v1/memories\"\n      })\n      .then(function(response) {\n        $this.setState({\n          leads: response.data.data\n        });\n      });\n  }\n\n  fetchMemory(year) {\n    let $this = this;\n    this.props\n      .authAxios({\n        method: \"get\",\n        url: `/api/v1/projects/${this.props.projectId}/memories`,\n        data: {\n          year: year\n        }\n      })\n      .then(response => {\n        console.log(response);\n        $this.setState({\n          memoryList: response.data.data,\n          activeYear: year\n        });\n      });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"overview-wrap wrapper-title position-relative\">\n          <h3>Timeline</h3>\n        </div>\n        <div className=\"default-tab\">\n          {this.state.memoryTimeline[0] ? (\n            <MemoryTimeline\n              memoryTimeline={this.state.memoryTimeline}\n              fetchMemory={this.fetchMemory}\n              onProductClick={this.onProductClick}\n              activeYear={this.state.activeYear}\n            />\n          ) : null}\n          <h3 className=\"heading-with-wrapper heading-button border-heading-bottom bar-with-button\">\n            <i className=\"fa fa-circle-o\" />\n            Memories\n            <button\n              id=\"add-new-memory\"\n              className=\"au-btn au-btn-icon au-btn--pink btn-lg\"\n              onClick={this.toggle}\n            >\n              <i className=\"fa fa-rotate-left\" />\n              Add Memory\n            </button>\n          </h3>\n          <MemoryListing />\n          <HocForm\n            toggle={this.toggle}\n            modal={this.state.modal}\n            formFields={MemoryAddFields}\n            FormView={AddMemoryForm}\n            submitCall={this.addMemoryCall}\n            isChannel={false}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MakeContextConsumer(Memory);\n"]},"metadata":{},"sourceType":"module"}